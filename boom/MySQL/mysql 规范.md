## 建表规范
1. 表存储引擎选择 InnoDB
2. 表字符集默认使用 utf8，必要时候使用 utf8mb4
3. 禁止使用存储过程，视图，触发器，Event（调试，排错，迁移都比较困难，扩展性较差）
4. 禁止使用外键（使得表之间耦合紧密，影响性能，甚至造成死锁）
5. 表名必须用小写，采用下划线分隔
6. 禁止在数据库中存储大文件，将大字段、访问频度低的字段拆分到单独的表中存储，分离冷热数据
7. 根据业务区分使用 `tinyint/smallint/int/bigint`，分别会占用 1/4/8 字节
8. 字段长度固定或近似的场景，适合使用 `char`，能够减少碎片，查询性能高
9. `datetime` 占用 5 个字节，`timestamp` 占用 4 个字节
10. 必须把字段定义为 `not null` 并设默认值
11. 使用 `unsigned int` 代替 `char(15)` 存储 IPv4
12. 使用 `varchar(20)` 代替整数存储手机号
13. 使用 `tinyint` 代替 `enum`，`enum` 增加新值要进行 DDL 操作

## 索引规范
1. 唯一索引使用 uniq_[字段名] 来命名
2. 普通索引使用 idx_[字段名] 来命名
3. 首先应考虑在 `where` 及 `order by` 涉及的列上建立索引
4. 需要 `join` 查询的列建立索引
5. 数据区分不明显的不建议创建索引
6. 字符字段可以选择建立前缀索引
5. 单张表索引数量建议控制在 5 个以内

## 查询规范
1. 负向查询不能使用索引，例如 `not in`, `!=`, `<>` 等
2. 前导模糊查询不能使用索引
3. 避免进行 `null` 值的判断
4. 避免使用 `or` 来连接条件，可改为 `union all` 实现，或者改为 `in` 实现，`in` 格式控制在 50
5. 对于连续数值，用 `in` 代替 `between`
6. 避免在字段上进行计算操作，这样不能命中索引
7. 避免大事务操作，提高系统并发能力
8. 使用 `limit` 减少返回的行数，减少数据传输时间和带宽浪费
9. 使用连接查询代替子查询，这样不需要建立临时表，其速度比子查询快
10. 对于需要经常联合查询的表，建立中间表以提高查询效率
11. 进行 `join` 查询的字段类型要相同
12. 避免三个表以上的 `join` 查询
12. 避免 `select *` 查询，以免会增加 cpu/io/内存/带宽 开销，指定字段查询在表结构变更时能保证对应程序无影响
13. 遵循最左前缀问题
14. 不要让数据库帮我们做强制类型转换，这样不会使用索引

## 其他
### `truncate` VS `delete`
1. `truncate` 只能删除表中全部数据
2. `delete` 可以删除表中全部数据，也可以删除部分数据
3. `truncate` 删除后，不能回滚；`delete` 可以回滚
4. `truncate` 的执行速度比 `delete` 快

### 高效分页
```sql
select id from t limit 10000, 10;
select id from t where id > 10000 limit 10;
```

